<!DOCTYPE html>

<html>

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title></title>
  <meta name="description" content="">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="universalStyles.css">
  <link rel="stylesheet" href="ruffDocsStyles.css">
</head>

<body>

 
  

  <div class="headerContainer">
    <section class="logoSvgSection">


      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 80 1438 300">

        <defs>
          <radialGradient id="logoTextGradient" gradientTransform="translate(-0.11 -0.03) scale(1.22, 1.05)">
       <stop offset="1%" stop-color="#e53e3e"/>
       <stop offset="25%" stop-color="#dd3a3a"/>
       <stop offset="49%" stop-color="#d53737"/>
       <stop offset="97%" stop-color="#c53030"/>
     </radialGradient>

          <linearGradient id="logoBackgroundGradient" x1="0.49" y1="0" x2="0.51" y2="1">
      <stop offset="14%" stop-color="#001885"/>
      <stop offset="23.25%" stop-color="rgba(2, 22, 147, 0.94)"/>
      <stop offset="32.5%" stop-color="rgba(5, 18, 163, 0.88)"/>
      <stop offset="51%" stop-color="rgba(27, 13, 186, 0.75)"/>
      <stop offset="63%" stop-color="rgba(17, 7, 157, 0.81)"/>
      <stop offset="75%" stop-color="rgba(8, 3, 128, 0.88)"/>
      <stop offset="99%" stop-color="#000042"/>
    </linearGradient>


    <linearGradient id="logoBoxStrokeGradient" x1="0.13" y1="0.17" x2="0.87" y2="0.83">
      <stop offset="5%" stop-color="#3a59e4"/>
      <stop offset="10.25%" stop-color="#4663e6"/>
      <stop offset="15.5%" stop-color="#516ce7"/>
      <stop offset="26%" stop-color="#667eea"/>
      <stop offset="30.75%" stop-color="#5989eb"/>
      <stop offset="35.5%" stop-color="#4c94eb"/>
      <stop offset="45%" stop-color="#50a5e2"/>
      <stop offset="49%" stop-color="#4ca5ee"/>
      <stop offset="53%" stop-color="#5ba4f2"/>
      <stop offset="61%" stop-color="#77a2f8"/>
      <stop offset="70.75%" stop-color="#668eef"/>
      <stop offset="80.5%" stop-color="#5979e3"/>
      <stop offset="100%" stop-color="#4c51bf"/>
    </linearGradient>
        </defs>



        <path id="box" fill="url(#logoBackgroundGradient)" stroke="url(#logoBoxStrokeGradient)" stroke-width="5"
           stroke-linecap="round"
           stroke-linejoin="round"
         d="M 182.70,120.96
                       C 182.70,120.96 182.69,310.25 182.69,310.25
                         182.69,310.25 220.50,348.06 220.50,348.06
                         220.50,348.06 1275.35,348.00 1275.35,348.00
                         1275.35,348.00 1275.48,158.74 1275.48,158.74
                         1275.48,158.74 1237.87,120.96 1237.87,120.96
                         1237.87,120.96 182.70,120.96 182.70,120.96 Z" />

        <path id="textPath" fill="url(#logoTextGradient)" stroke="darkred" stroke-width="4"

         d="M 360.27,258.00
                           C 360.27,258.00 360.27,284.00 360.27,284.00
                             360.27,284.00 272.62,284.00 272.62,284.00
                             272.62,284.00 272.62,263.00 272.62,263.00
                             272.62,263.00 319.30,205.00 319.30,205.00
                             319.30,205.00 276.17,205.00 276.17,205.00
                             276.17,205.00 276.17,179.00 276.17,179.00
                             276.17,179.00 358.80,179.00 358.80,179.00
                             358.80,179.00 358.80,201.00 358.80,201.00
                             358.80,201.00 313.52,258.00 313.52,258.00
                             313.52,258.00 360.27,258.00 360.27,258.00 Z
                           M 415.44,286.00
                           C 402.43,286.00 392.09,281.94 384.42,273.81
                             376.77,265.68 372.94,256.14 372.94,245.19
                             372.94,233.43 376.93,223.62 384.92,215.78
                             392.92,207.93 403.33,204.00 416.14,204.00
                             429.05,204.00 439.42,207.88 447.27,215.62
                             455.11,223.37 459.03,233.07 459.03,244.73
                             459.03,256.51 455.05,266.33 447.11,274.20
                             439.16,282.07 428.60,286.00 415.44,286.00 Z
                           M 415.91,267.00
                           C 420.69,267.00 423.60,264.51 424.66,259.52
                             425.72,254.52 426.25,249.30 426.25,243.88
                             426.25,236.48 425.50,231.15 424.00,227.89
                             422.51,224.63 419.84,223.00 415.98,223.00
                             412.43,223.00 409.83,224.68 408.19,228.05
                             406.54,231.41 405.72,236.95 405.72,244.66
                             405.72,253.71 406.57,259.70 408.27,262.62
                             409.96,265.54 412.51,267.00 415.91,267.00 Z
                           M 553.70,284.00
                           C 553.70,284.00 522.92,284.00 522.92,284.00
                             522.92,284.00 522.92,234.52 522.92,234.52
                             522.92,230.45 522.29,227.84 521.03,226.70
                             519.77,225.57 518.19,225.00 516.30,225.00
                             510.69,225.00 507.89,228.92 507.89,236.75
                             507.89,236.75 507.89,284.00 507.89,284.00
                             507.89,284.00 477.09,284.00 477.09,284.00
                             477.09,284.00 477.09,206.00 477.09,206.00
                             477.09,206.00 505.64,206.00 505.64,206.00
                             505.64,206.00 505.64,217.11 505.64,217.11
                             509.86,208.37 517.39,204.00 528.25,204.00
                             533.96,204.00 538.77,205.09 542.70,207.28
                             546.64,209.46 549.46,212.28 551.16,215.75
                             552.85,219.22 553.70,225.25 553.70,233.83
                             553.70,233.83 553.70,284.00 553.70,284.00 Z
                           M 627.94,256.00
                           C 627.94,256.00 656.64,257.92 656.64,257.92
                             654.94,265.70 650.61,272.33 643.64,277.80
                             636.67,283.27 627.25,286.00 615.38,286.00
                             602.16,286.00 591.61,282.17 583.73,274.50
                             575.87,266.84 571.94,257.32 571.94,245.97
                             571.94,234.20 575.82,224.26 583.58,216.16
                             591.35,208.05 601.71,204.00 614.67,204.00
                             627.22,204.00 637.37,207.81 645.11,215.42
                             652.85,223.04 656.72,233.41 656.72,246.53
                             656.72,247.61 656.69,249.09 656.64,251.00
                             656.64,251.00 604.11,251.00 604.11,251.00
                             604.21,256.42 605.09,260.44 606.73,263.06
                             608.38,265.69 611.52,267.00 616.14,267.00
                             622.82,267.00 626.75,263.34 627.94,256.00 Z
                           M 625.94,236.00
                           C 625.88,230.87 624.82,227.42 622.73,225.66
                             620.65,223.89 618.07,223.00 614.98,223.00
                             607.68,223.00 604.03,227.34 604.03,236.00
                             604.03,236.00 625.94,236.00 625.94,236.00 Z
                           M 767.69,286.00
                           C 752.88,286.00 740.80,281.07 731.47,271.20
                             722.13,261.34 717.47,248.14 717.47,231.61
                             717.47,215.81 721.93,202.76 730.84,192.45
                             739.77,182.15 752.16,177.00 768.00,177.00
                             782.66,177.00 794.60,181.86 803.83,191.56
                             813.07,201.27 817.69,214.23 817.69,230.45
                             817.69,247.23 813.03,260.69 803.72,270.81
                             794.41,280.94 782.41,286.00 767.69,286.00 Z
                           M 767.55,262.00
                           C 772.99,262.00 776.91,259.61 779.30,254.83
                             781.69,250.05 782.89,241.30 782.89,228.59
                             782.89,210.20 777.98,201.00 768.16,201.00
                             757.56,201.00 752.27,211.49 752.27,232.47
                             752.27,252.16 757.36,262.00 767.55,262.00 Z
                           M 869.28,225.00
                           C 869.28,225.00 869.28,284.00 869.28,284.00
                             869.28,284.00 840.27,284.00 840.27,284.00
                             840.27,284.00 840.27,225.00 840.27,225.00
                             840.27,225.00 828.55,225.00 828.55,225.00
                             828.55,225.00 828.55,206.00 828.55,206.00
                             828.55,206.00 840.27,206.00 840.27,206.00
                             840.27,199.36 840.55,194.44 841.11,191.25
                             841.68,188.05 843.10,184.99 845.36,182.06
                             847.62,179.14 850.65,176.90 854.45,175.34
                             858.27,173.78 863.38,173.00 869.81,173.00
                             876.71,173.00 883.32,173.67 889.64,175.00
                             889.64,175.00 889.64,195.00 889.64,195.00
                             884.75,194.34 881.10,194.00 878.69,194.00
                             876.27,194.00 874.05,194.52 872.05,195.55
                             870.05,196.57 869.05,199.08 869.05,203.08
                             869.05,203.08 869.05,206.00 869.05,206.00
                             869.05,206.00 889.11,206.00 889.11,206.00
                             889.11,206.00 889.11,225.00 889.11,225.00
                             889.11,225.00 869.28,225.00 869.28,225.00 Z
                           M 1009.28,284.00
                           C 1009.28,284.00 1003.33,263.00 1003.33,263.00
                             1003.33,263.00 975.09,263.00 975.09,263.00
                             975.09,263.00 968.77,284.00 968.77,284.00
                             968.77,284.00 942.55,284.00 942.55,284.00
                             942.55,284.00 975.09,179.00 975.09,179.00
                             975.09,179.00 1009.28,179.00 1009.28,179.00
                             1009.28,179.00 1042.22,284.00 1042.22,284.00
                             1042.22,284.00 1009.28,284.00 1009.28,284.00 Z
                           M 980.58,239.00
                           C 980.58,239.00 997.70,239.00 997.70,239.00
                             997.70,239.00 989.14,211.77 989.14,211.77
                             989.14,211.77 980.58,239.00 980.58,239.00 Z
                           M 1074.61,284.00
                           C 1074.61,284.00 1057.25,284.00 1057.25,284.00
                             1057.25,284.00 1057.25,179.00 1057.25,179.00
                             1057.25,179.00 1087.58,179.00 1087.58,179.00
                             1087.58,179.00 1087.58,214.80 1087.58,214.80
                             1091.80,207.60 1098.51,204.00 1107.72,204.00
                             1114.20,204.00 1119.70,205.70 1124.22,209.11
                             1128.74,212.52 1132.10,217.38 1134.31,223.70
                             1136.53,230.03 1137.64,236.67 1137.64,243.64
                             1137.64,256.34 1134.81,266.57 1129.16,274.34
                             1123.50,282.12 1115.06,286.00 1103.84,286.00
                             1092.79,286.00 1084.38,281.92 1078.62,273.77
                             1076.98,276.70 1075.64,280.11 1074.61,284.00 Z
                           M 1087.58,255.19
                           C 1087.58,263.06 1090.55,267.00 1096.52,267.00
                             1099.75,267.00 1102.23,265.57 1103.95,262.72
                             1105.68,259.86 1106.55,253.96 1106.55,245.05
                             1106.55,235.34 1105.57,229.24 1103.61,226.75
                             1101.66,224.25 1099.25,223.00 1096.38,223.00
                             1094.10,223.00 1092.07,223.90 1090.27,225.69
                             1088.47,227.47 1087.58,230.06 1087.58,233.47
                             1087.58,233.47 1087.58,255.19 1087.58,255.19 Z
                           M 1186.89,175.00
                           C 1186.89,175.00 1186.89,199.00 1186.89,199.00
                             1186.89,199.00 1156.09,199.00 1156.09,199.00
                             1156.09,199.00 1156.09,175.00 1156.09,175.00
                             1156.09,175.00 1186.89,175.00 1186.89,175.00 Z
                           M 1186.89,206.00
                           C 1186.89,206.00 1186.89,284.00 1186.89,284.00
                             1186.89,284.00 1156.09,284.00 1156.09,284.00
                             1156.09,284.00 1156.09,206.00 1156.09,206.00
                             1156.09,206.00 1186.89,206.00 1186.89,206.00 Z" />
      </svg>
    </section>

    <nav class="navbar">
      <a href="https://zoneofabi.github.io/contact/">
        <p>Contact</p>
      </a>
      <a href="https://zoneofabi.github.io/art/">
        <p>VFX</p>
      </a>
      <a class="teleportButton" href="https://zoneofabi.github.io/home/">
        <p>Teleport To Home Base</p>
      </a>
      <a href="https://zoneofabi.github.io/apps/">
        <p>Apps</p>
      </a>
      <a href="https://zoneofabi.github.io/writing/">
        <p>Writing</p>
      </a>
    
    
    </nav>
  </div>


  
  <div class="pageContentContainer">

    <h1 class="mainPageTitle">Ruff Engine Docs</h1>

    <div class="ruffdocsNavCont">
      <h5>Docs Navigation Bar</h5>
      <nav class="ruffdocs_navbar">
        <a href="index.html">Home</a>
        <a href="combrots/combrots.html">Rotation Sequence</a>
        <a href="rayref/rayref.html">Ray Refraction</a>
        <a href="csdv/csdv.html">Screen Displacement</a>
      </nav>
    </div>

    <section class="categorySection">

      <h2>Introduction</h2>

      <div class="articleGallery">

        <article class="docArticle">

          <h2>How it works</h2>

          <h3>A Top-Down View Oriented Case Example:</h3>

          <p>

        
            
            For the sake of simplicity, let's consider the 3D world, looking at it from the Top.
            
            Pretend you already have a camera existing within a 3D environment that is directly positioned behind a translucent cube
            (with its edges visible) and looking straight ahead at it.
            
            Now pretend that you orbit this camera leftwards around this cube. If you imagine what the camera would be seeing, you
            can imagine that as we orbit, the left side of the cube now comes into our camera's view.
            
            How would we program this phenomenon? Where different parts of the cube become visible based on which angle we are
            looking at it from? By projection. Pretend that light is shooting from the points. But the only rays we're concerned about is the light that
            is directly hitting our camera screen at a perpendicular angle.

            
          </p>

          <div class="docArticle_imageGallery">

            <div class="docArticle_imageCont">
              <img src="images/intro1.png" alt="">
            </div>

            <div class="docArticle_imageCont">
              <img src="images/intro2.png" alt="">
            </div>

          </div>

          <p>
            
          
            This is a way of the camera making sense of the world around it and seeing things from its perspective. Notice how in
            the first frame, it appears as though there are 2 projection rays. There are actually 4 points, but since the camera is
            perfectly aligned with it, we are getting what appears to be 2 rays hitting the screen
            
            And then when we orbit around it, notice how all 4 points are now coming into view and 4 rays are hitting the screen.
            
            Also notice the gap between the rays in the first frame. You can see how as we orbit around, this gap would get smaller
            (as well as additional gaps appearing since more of the points are now visible). These are the transformations that
            create that illusion of a 3D object moving around in space.
            
            In order to drive all the points(vectors) in our world through these transformations, we need to a dynamic set of unit
            vectors that rotate about an axis. All of the points(vectors) in our 3D world should be oriented with these. As the
            camera turns, these unit vectors simply rotate along with the camera. And all the vectors in our scene then get redrawn
            and oriented with the new position of these unit vectors. I have called these unit vectors the 'CamHats'. In Ruff Engine, we have 2 sets of unit vectors. The CamHats (which are mobile) and the WorldHats (which are fixed).
          </p>

        </article>


        <article class="docArticle">

          <h2>The CamHats (Unit Vectors)</h2>

          <h3>Keeping Track Of Camera Rotations</h3>

          <p>
            The CamHats are the set of unit vectors (I^, J^ and K^) that are linked to the camera's orientation in the world. The
            angle at which the camera is facing (The Rotation Orientation - RO) will decide the angle of the CamHats. Think of the
            CamHats as a well oiled mechanical pulley system that moves in conjunction with the camera's twists and turns. Whatever
            direction the camera turns in, it will always face the camera. Note that the position of it's origin however, is fixed
            at the same spot as the origin of the world. It's only it's rotation that keeps changing.
            Note that the camera's rotation orientation is on 2 levels:
            <ul>
              <li>Horizontal rotation orientation (HorzRO or HRO) which tracks rotation on XZ plane</li>
              <li>Vertical rotation (VertRO or VRO) which tracks rotations on the YZ plane</li>
            </ul>
          </p>

          <p><strong>Purpose:</strong> It is necessary to have two different sets of unit vectors existing within the 3D world. The other set of unit
          vectors (apart from the CamHats) is called the WorldHats (Which has its own I^, J^ and K^). These WorldHat unit vectors
          are static. They do not move with the camera. The discrepency between the CamHats and The WorldHats is what is
          responsible for creating the projection of the world onto the camera's screen.
          If you place the camera with a 0 HRO and 0 VRO configuration, the CamHats will be directly in line with the WorldHats.
          The cam will see the world directly on one axis. When you start to rotated the camera, all of the points in the world
          will start to rotate and shift.
          
          Follow the sequence of diagrams below to get a visual understanding.</p>


          <p>The two images below show the Worldhats from the top view (So just I^ and K^). Now lets draw a vector oriented with this
          unit vector system (represented by the pink line)</p>

          <div class="docArticle_imageGallery">
          
            <div class="docArticle_imageCont">
              <img src="images/camHats1.png" alt="">
            </div>
          
            <div style="background-color: rgb(0, 0, 91);" class="docArticle_imageCont">
              <img src="images/camHats1.5.png" alt="">
            </div>
          
          </div>

          <p>Now lets introduce a new set of unit vectors (The CamHats) over here. They start in the same position as the WorldHats
          but they rotate around (using the origin as the axis)
          
          The angle between the base frame (represented by the WorldHats) and the current orientation of the CamHats is shown by
          the red angle line.
          
          Now what if we orient that original vector (the pink line) with these new unit vectors (The CamHats)?
          
          That would be a rotation of that vector using the origin as the axis of rotation. The vector would displace on the
          X-axis and Z-axis in this case. The original coordinates of the vector and the rotation angle can be used to derive the
          new coordinates of the vector after it has undergone this rotation.</p>

          <div class="docArticle_imageGallery">
          
            <div class="docArticle_imageCont">
              <img src="images/camHats6.png" alt="">
            </div>
          
            <div style="background-color: rgb(0, 0, 91);" class="docArticle_imageCont">
              <img src="images/camHats5.png" alt="">
            </div>
          
          </div>

          <p>This is the basic idea behind the camHats. To track the rotation orientation of the camera so that it knows by what
          angle it has to transform all the vectors in the world based on where the camera is looking. Note how the camera's
          looking direction is aligned with the angle of the CamHats. And instead of just rotating one vector, we are rotating
          every vector in the 3D world (which is equivalent to rotating the entire world).
          
          Note that what we are looking at here is just the top view. We have to track the rotation of the CamHats horizontally
          AND vertically! Combining these rotations is really complicated, as you'll see later. See the Combining Rotations page to
          understand this issue better. <a href="combrots/combrots.html">Combining Rotations</a></p>

        </article>

      </div>


    </section>


    <section class="categorySection">

      <h2>Orienting The Camera To The World</h2>

      <div class="articleGallery">

        <article class="docArticle">
          <h2>Combined Rotations</h2>

          <p>
            Ruff engine uses a 2 layer rotation system. Horizontal rotations and then vertical rotations. The order is important
            here. For sake of being concise, I will shorten the word Horizontal to 'Horz' and Vertical to 'Vert'. HorzRO is the
            horizontal rotation orientation. and VertRO is the vertical rotation orientation
          </p>

          <p>
            Applying a rotation in one axis is pretty easy. Just use your basic Sin Cos and Tan on the applied rotation angle 
            to calculate the coordinates in the new position. 
          </p>

          <p>Things get complicated when we have to mix different rotations in different axis. 
            Especially if you want to try and approach this problem the intuitive way (where you truly understand what is happening to the vectors and track their final position).
          </p>

          <h3>Horizontal Rotations</h3>

          <p>
            
            When we apply a horizontal rotation on the camera (On the XZ Plane), the camhats have to rotate, using J^ as the axis of
            rotation. So I^ and K^ shift and after the rotations, they have new X and Z coordinates.
            
          </p>

          <h3>Vertical Rotations</h3>
           <p>
            
            When we apply a vertical rotation on the camera (On the XY Plane), the camhats have to rotate using I^ as the axis of
            rotation. So J^ and K^ move to new positions and they have new Z and Y coordinates.
          </p>


          <h3>Combining Rotations</h3>

          <p>

            Problems arise when we need to combine different rotations. Because when we apply a horizontal rotation and then a
            vertical rotation.....we need to preserve the current configuration of the CamHats when we do this. If you consider a
            simple vertical rotation (with no horizontal rotation applied), you are just displacing J^ and K^ on the Z and Y axis.
            But if the camera is under the influence of a horizontal rotation, and you apply a vertical rotation, you will actually
            displace J^ and K^ on the X, Y and Z axis. Which is why we need a system that updates all the components of the unit
            vectors based on our 2 angles - Horizontal Rotation Orientation (HRO) and Vertical Rotation Orientation (VRO). Even if
            we don't apply a horizontal rotation, we still need to factor in that angle of 0 HRO into our calculations. This is
            something I struggled with for a while until I came up with a sequence.
          </p>

          <h3>
            Theory behind the sequence:
          </h3>

          <p>
            To develop a sequence, we need to look at the CamHats and break them down into sub components. Example: Look at I^ and
            break it down into 3 component vectors - X-Comp (X Component vector), Y-Comp (Y Component Vector) and Z-Comp (Z
            component vector).
          </p>

          <p>
            In this expanded view, ask yourself which of these components depend on ONLY ONE angle (Either HRO or VRO). If they move
            with a change in HRO, they would not move with a change in VRO. These components are what need to be updated first.
            Since we have arranged rotations in this order: Horz Rotations > Vert Rotations ; We must first identify which of these
            components depend only on the HRO. Then we update those with the HRO. After we've done that, we identify all the
            components that depend ONLY on the VRO. Then we update those.
          </p>

          <p>
            After we've done all that, you'll find that we have enough guidance available to acquire data about the components in
            our diagram which depend on both angles.
          </p>

          <p>
            There is also another technique used here when combining rotations. And that is finding the displacements of
            displacements (subdividing displacements into further displacements). When you apply a horizontal rotation on a unit
            vector, you will acquire new component vectors (displacements) of the rotated unit vector. To get the final positions of
            the unit vector after you have applied the VRO on them, you will need to rotate each displalcement by the VRO and then
            keep track of where it lands. These operations differ from regular unit vector rotations in that you are not using 1 as
            the unit length in your trig calculations. You are using the lengths of those displacements instead.
          </p>

        </article>


        <article class="docArticle">
          <h2>Displacement On The Screen</h2>
        
          <p>
            If you keep the camera fixed at a point and draw the rays that shoot from objects onto the screen, you'll find that it's not enough to just apply a rotation on those vectors. When they travel to the camera screen, they actually get displaced (leftwards/rightwards and upwards/downwards)
          </p>
        
        </article>


      </div>

    </section>
    



    
    

   


  </div>








  <div class="footerContainer">


  </div>




  <script src="" async defer></script>
</body>

</html>
