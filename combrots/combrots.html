<!DOCTYPE html>

<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title></title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="../universalStyles.css">
    <link rel="stylesheet" href="../ruffDocsStyles.css">
</head>

<body>




    <div class="headerContainer">
        <section class="logoSvgSection">


            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 80 1438 300">

                <defs>
                    <radialGradient id="logoTextGradient" gradientTransform="translate(-0.11 -0.03) scale(1.22, 1.05)">
                        <stop offset="1%" stop-color="#e53e3e" />
                        <stop offset="25%" stop-color="#dd3a3a" />
                        <stop offset="49%" stop-color="#d53737" />
                        <stop offset="97%" stop-color="#c53030" />
                    </radialGradient>

                    <linearGradient id="logoBackgroundGradient" x1="0.49" y1="0" x2="0.51" y2="1">
                        <stop offset="14%" stop-color="#001885" />
                        <stop offset="23.25%" stop-color="rgba(2, 22, 147, 0.94)" />
                        <stop offset="32.5%" stop-color="rgba(5, 18, 163, 0.88)" />
                        <stop offset="51%" stop-color="rgba(27, 13, 186, 0.75)" />
                        <stop offset="63%" stop-color="rgba(17, 7, 157, 0.81)" />
                        <stop offset="75%" stop-color="rgba(8, 3, 128, 0.88)" />
                        <stop offset="99%" stop-color="#000042" />
                    </linearGradient>


                    <linearGradient id="logoBoxStrokeGradient" x1="0.13" y1="0.17" x2="0.87" y2="0.83">
                        <stop offset="5%" stop-color="#3a59e4" />
                        <stop offset="10.25%" stop-color="#4663e6" />
                        <stop offset="15.5%" stop-color="#516ce7" />
                        <stop offset="26%" stop-color="#667eea" />
                        <stop offset="30.75%" stop-color="#5989eb" />
                        <stop offset="35.5%" stop-color="#4c94eb" />
                        <stop offset="45%" stop-color="#50a5e2" />
                        <stop offset="49%" stop-color="#4ca5ee" />
                        <stop offset="53%" stop-color="#5ba4f2" />
                        <stop offset="61%" stop-color="#77a2f8" />
                        <stop offset="70.75%" stop-color="#668eef" />
                        <stop offset="80.5%" stop-color="#5979e3" />
                        <stop offset="100%" stop-color="#4c51bf" />
                    </linearGradient>
                </defs>



                <path id="box" fill="url(#logoBackgroundGradient)" stroke="url(#logoBoxStrokeGradient)" stroke-width="5"
                    stroke-linecap="round" stroke-linejoin="round" d="M 182.70,120.96
                       C 182.70,120.96 182.69,310.25 182.69,310.25
                         182.69,310.25 220.50,348.06 220.50,348.06
                         220.50,348.06 1275.35,348.00 1275.35,348.00
                         1275.35,348.00 1275.48,158.74 1275.48,158.74
                         1275.48,158.74 1237.87,120.96 1237.87,120.96
                         1237.87,120.96 182.70,120.96 182.70,120.96 Z" />

                <path id="textPath" fill="url(#logoTextGradient)" stroke="darkred" stroke-width="4" d="M 360.27,258.00
                           C 360.27,258.00 360.27,284.00 360.27,284.00
                             360.27,284.00 272.62,284.00 272.62,284.00
                             272.62,284.00 272.62,263.00 272.62,263.00
                             272.62,263.00 319.30,205.00 319.30,205.00
                             319.30,205.00 276.17,205.00 276.17,205.00
                             276.17,205.00 276.17,179.00 276.17,179.00
                             276.17,179.00 358.80,179.00 358.80,179.00
                             358.80,179.00 358.80,201.00 358.80,201.00
                             358.80,201.00 313.52,258.00 313.52,258.00
                             313.52,258.00 360.27,258.00 360.27,258.00 Z
                           M 415.44,286.00
                           C 402.43,286.00 392.09,281.94 384.42,273.81
                             376.77,265.68 372.94,256.14 372.94,245.19
                             372.94,233.43 376.93,223.62 384.92,215.78
                             392.92,207.93 403.33,204.00 416.14,204.00
                             429.05,204.00 439.42,207.88 447.27,215.62
                             455.11,223.37 459.03,233.07 459.03,244.73
                             459.03,256.51 455.05,266.33 447.11,274.20
                             439.16,282.07 428.60,286.00 415.44,286.00 Z
                           M 415.91,267.00
                           C 420.69,267.00 423.60,264.51 424.66,259.52
                             425.72,254.52 426.25,249.30 426.25,243.88
                             426.25,236.48 425.50,231.15 424.00,227.89
                             422.51,224.63 419.84,223.00 415.98,223.00
                             412.43,223.00 409.83,224.68 408.19,228.05
                             406.54,231.41 405.72,236.95 405.72,244.66
                             405.72,253.71 406.57,259.70 408.27,262.62
                             409.96,265.54 412.51,267.00 415.91,267.00 Z
                           M 553.70,284.00
                           C 553.70,284.00 522.92,284.00 522.92,284.00
                             522.92,284.00 522.92,234.52 522.92,234.52
                             522.92,230.45 522.29,227.84 521.03,226.70
                             519.77,225.57 518.19,225.00 516.30,225.00
                             510.69,225.00 507.89,228.92 507.89,236.75
                             507.89,236.75 507.89,284.00 507.89,284.00
                             507.89,284.00 477.09,284.00 477.09,284.00
                             477.09,284.00 477.09,206.00 477.09,206.00
                             477.09,206.00 505.64,206.00 505.64,206.00
                             505.64,206.00 505.64,217.11 505.64,217.11
                             509.86,208.37 517.39,204.00 528.25,204.00
                             533.96,204.00 538.77,205.09 542.70,207.28
                             546.64,209.46 549.46,212.28 551.16,215.75
                             552.85,219.22 553.70,225.25 553.70,233.83
                             553.70,233.83 553.70,284.00 553.70,284.00 Z
                           M 627.94,256.00
                           C 627.94,256.00 656.64,257.92 656.64,257.92
                             654.94,265.70 650.61,272.33 643.64,277.80
                             636.67,283.27 627.25,286.00 615.38,286.00
                             602.16,286.00 591.61,282.17 583.73,274.50
                             575.87,266.84 571.94,257.32 571.94,245.97
                             571.94,234.20 575.82,224.26 583.58,216.16
                             591.35,208.05 601.71,204.00 614.67,204.00
                             627.22,204.00 637.37,207.81 645.11,215.42
                             652.85,223.04 656.72,233.41 656.72,246.53
                             656.72,247.61 656.69,249.09 656.64,251.00
                             656.64,251.00 604.11,251.00 604.11,251.00
                             604.21,256.42 605.09,260.44 606.73,263.06
                             608.38,265.69 611.52,267.00 616.14,267.00
                             622.82,267.00 626.75,263.34 627.94,256.00 Z
                           M 625.94,236.00
                           C 625.88,230.87 624.82,227.42 622.73,225.66
                             620.65,223.89 618.07,223.00 614.98,223.00
                             607.68,223.00 604.03,227.34 604.03,236.00
                             604.03,236.00 625.94,236.00 625.94,236.00 Z
                           M 767.69,286.00
                           C 752.88,286.00 740.80,281.07 731.47,271.20
                             722.13,261.34 717.47,248.14 717.47,231.61
                             717.47,215.81 721.93,202.76 730.84,192.45
                             739.77,182.15 752.16,177.00 768.00,177.00
                             782.66,177.00 794.60,181.86 803.83,191.56
                             813.07,201.27 817.69,214.23 817.69,230.45
                             817.69,247.23 813.03,260.69 803.72,270.81
                             794.41,280.94 782.41,286.00 767.69,286.00 Z
                           M 767.55,262.00
                           C 772.99,262.00 776.91,259.61 779.30,254.83
                             781.69,250.05 782.89,241.30 782.89,228.59
                             782.89,210.20 777.98,201.00 768.16,201.00
                             757.56,201.00 752.27,211.49 752.27,232.47
                             752.27,252.16 757.36,262.00 767.55,262.00 Z
                           M 869.28,225.00
                           C 869.28,225.00 869.28,284.00 869.28,284.00
                             869.28,284.00 840.27,284.00 840.27,284.00
                             840.27,284.00 840.27,225.00 840.27,225.00
                             840.27,225.00 828.55,225.00 828.55,225.00
                             828.55,225.00 828.55,206.00 828.55,206.00
                             828.55,206.00 840.27,206.00 840.27,206.00
                             840.27,199.36 840.55,194.44 841.11,191.25
                             841.68,188.05 843.10,184.99 845.36,182.06
                             847.62,179.14 850.65,176.90 854.45,175.34
                             858.27,173.78 863.38,173.00 869.81,173.00
                             876.71,173.00 883.32,173.67 889.64,175.00
                             889.64,175.00 889.64,195.00 889.64,195.00
                             884.75,194.34 881.10,194.00 878.69,194.00
                             876.27,194.00 874.05,194.52 872.05,195.55
                             870.05,196.57 869.05,199.08 869.05,203.08
                             869.05,203.08 869.05,206.00 869.05,206.00
                             869.05,206.00 889.11,206.00 889.11,206.00
                             889.11,206.00 889.11,225.00 889.11,225.00
                             889.11,225.00 869.28,225.00 869.28,225.00 Z
                           M 1009.28,284.00
                           C 1009.28,284.00 1003.33,263.00 1003.33,263.00
                             1003.33,263.00 975.09,263.00 975.09,263.00
                             975.09,263.00 968.77,284.00 968.77,284.00
                             968.77,284.00 942.55,284.00 942.55,284.00
                             942.55,284.00 975.09,179.00 975.09,179.00
                             975.09,179.00 1009.28,179.00 1009.28,179.00
                             1009.28,179.00 1042.22,284.00 1042.22,284.00
                             1042.22,284.00 1009.28,284.00 1009.28,284.00 Z
                           M 980.58,239.00
                           C 980.58,239.00 997.70,239.00 997.70,239.00
                             997.70,239.00 989.14,211.77 989.14,211.77
                             989.14,211.77 980.58,239.00 980.58,239.00 Z
                           M 1074.61,284.00
                           C 1074.61,284.00 1057.25,284.00 1057.25,284.00
                             1057.25,284.00 1057.25,179.00 1057.25,179.00
                             1057.25,179.00 1087.58,179.00 1087.58,179.00
                             1087.58,179.00 1087.58,214.80 1087.58,214.80
                             1091.80,207.60 1098.51,204.00 1107.72,204.00
                             1114.20,204.00 1119.70,205.70 1124.22,209.11
                             1128.74,212.52 1132.10,217.38 1134.31,223.70
                             1136.53,230.03 1137.64,236.67 1137.64,243.64
                             1137.64,256.34 1134.81,266.57 1129.16,274.34
                             1123.50,282.12 1115.06,286.00 1103.84,286.00
                             1092.79,286.00 1084.38,281.92 1078.62,273.77
                             1076.98,276.70 1075.64,280.11 1074.61,284.00 Z
                           M 1087.58,255.19
                           C 1087.58,263.06 1090.55,267.00 1096.52,267.00
                             1099.75,267.00 1102.23,265.57 1103.95,262.72
                             1105.68,259.86 1106.55,253.96 1106.55,245.05
                             1106.55,235.34 1105.57,229.24 1103.61,226.75
                             1101.66,224.25 1099.25,223.00 1096.38,223.00
                             1094.10,223.00 1092.07,223.90 1090.27,225.69
                             1088.47,227.47 1087.58,230.06 1087.58,233.47
                             1087.58,233.47 1087.58,255.19 1087.58,255.19 Z
                           M 1186.89,175.00
                           C 1186.89,175.00 1186.89,199.00 1186.89,199.00
                             1186.89,199.00 1156.09,199.00 1156.09,199.00
                             1156.09,199.00 1156.09,175.00 1156.09,175.00
                             1156.09,175.00 1186.89,175.00 1186.89,175.00 Z
                           M 1186.89,206.00
                           C 1186.89,206.00 1186.89,284.00 1186.89,284.00
                             1186.89,284.00 1156.09,284.00 1156.09,284.00
                             1156.09,284.00 1156.09,206.00 1156.09,206.00
                             1156.09,206.00 1186.89,206.00 1186.89,206.00 Z" />
            </svg>
        </section>

        <nav class="navbar">
            <a href="https://zoneofabi.github.io/contact/">
                <p>Contact</p>
            </a>
            <a href="https://zoneofabi.github.io/art/">
                <p>VFX</p>
            </a>
            <a class="teleportButton" href="https://zoneofabi.github.io/home/">
                <p>Teleport To Home Base</p>
            </a>
            <a href="https://zoneofabi.github.io/apps/">
                <p>Apps</p>
            </a>
            <a href="https://zoneofabi.github.io/writing/">
                <p>Writing</p>
            </a>
        
        
        </nav>
    </div>



    <div class="pageContentContainer">

        <h1 class="mainPageTitle">Ruff Engine Docs</h1>
        <div class="ruffdocsNavCont">
            <h5>Docs Navigation Bar</h5>
            <nav class="ruffdocs_navbar">
                <a href="../index.html">Home</a>
                <a href="combrots.html">Rotation Sequence</a>
                <a href="../rayref/rayref.html">Ray Refraction</a>
                <a href="../csdv/csdv.html">Screen Displacement</a>
            </nav>
        </div>

        <section class="categorySection">

            <h2>Combining Rotations And Configuring The CamHats</h2>

            <div class="articleGallery">

                <article class="docArticle">

                    <h2>Combined Rotations</h2>

                    <h3>Horizontal Rotations</h3>

                    <p>
                        When we apply a horizontal rotation on the camera (On the XZ Plane), the camhats have to rotate, using J^ as the axis of
                        rotation. So I^ and K^ shift and after the rotations, they have new X and Z coordinates.

                    </p>

                    <h3>Vertical Rotations</h3>
                    
                    <p>
                    When we apply a vertical rotation on the camera (On the XY Plane), the camhats have to rotate using I^ as the axis of
                    rotation. So J^ and K^ move to new positions and they have new Z and Y coordinates.
                    </p>

                    <h3>Combining Rotations</h3>
                    
                    <p>
                    Problems arise when we need to combine different rotations. Because when we apply a horizontal rotation and then a
                    vertical rotation.....we need to preserve the current configuration of the CamHats when we do this. If you consider a
                    simple vertical rotation (with no horizontal rotation applied), you are just displacing J^ and K^ on the Z and Y axis.
                    But if the camera is under the influence of a horizontal rotation, and you apply a vertical rotation, you will actually
                    displace J^ and K^ on the X, Y and Z axis. Which is why we need a system that updates all the components of the unit
                    vectors based on our 2 angles - Horizontal Rotation Orientation (HRO) and Vertical Rotation Orientation (VRO). Even if
                    we don't apply a horizontal rotation, we still need to factor in that angle of 0 HRO into our calculations. This is
                    something I struggled with for a while until I came up with a sequence.
                    </p>


                </article>


                <article class="docArticle">

                    <h2>Theory behind the sequence</h2>

                    <h3>Keeping Track Of Camera Rotations</h3>

                    <p>
                        To develop a sequence, we need to look at the CamHats and break them down into sub components. Example: Look at I^ and
                        break it down into 3 component vectors - X-Comp (X Component vector), Y-Comp (Y Component Vector) and Z-Comp (Z
                        component vector).
                    </p>

                    <p>
                        In this expanded view, ask yourself which of these components depend on ONLY ONE angle (Either HRO or VRO). If they move
                        with a change in HRO, they would not move with a change in VRO. These components are what need to be updated first.
                        Since we have arranged rotations in this order: Horz Rotations > Vert Rotations ; We must first identify which of these
                        components depend only on the HRO. Then we update those with the HRO. After we've done that, we identify all the
                        components that depend ONLY on the VRO. Then we update those.
                    </p>

                    <p>
                        After we've done all that, you'll find that we have enough guidance available to acquire data about the components in
                        our diagram which depend on both angles.
                    </p>

                    <p>
                        There is also another technique used here when combining rotations. And that is finding the displacements of
                        displacements (subdividing displacements into further displacements). When you apply a horizontal rotation on a unit
                        vector, you will acquire new component vectors (displacements) of the rotated unit vector. To get the final positions of
                        the unit vector after you have applied the VRO on them, you will need to rotate each displalcement by the VRO and then
                        keep track of where it lands. These operations differ from regular unit vector rotations in that you are not using 1 as
                        the unit length in your trig calculations. You are using the lengths of those displacements instead.
                    </p>

                </article>

            </div>


        </section>


        <section class="categorySection">

            <h2>The Sequence Expanded </h2>

            <div class="articleGallery_OneStream">

                <article class="docArticle">
                    <h2>Stage 1</h2>

                    <p>
                        Our first job is to orient Cam I^ with HorzRO. It turns out that in our current rotation system (Horz > Vert), The
                        Y-component vector of Cam I^ never actually changes! It always is flat and parallel with the XZ Plane. No matter what
                        Horz angle you put the cam in, when you pitch up and down, this Y-Component of Cam I^ never moves. So we do not have to
                        ever touch it. It's always 0. We have to orient the X-Component vector and Z-Component vector of Cam I^ with HorzRO. As
                        you can see in the diagram on the right, when we rotate Cam I^ with the assigned HorzRO, it rotates left and then you
                        can track the displacement on the X-axis and the Z-axis. If we look at the HorzRO, we can see that the displacement on
                        the X-axis is adjacent to the angle. So getting this X-Component vector is simply Cos(HorzRO). And The Z-axis
                        displacement is opposite the HorzRO. So The Z-axis displacement is Sin(HorzRO). This has a negative polarity however
                        because we are going to the LEFT of the coordinate system (A left turn is considered a decrease in HorzRO and an right
                        turn is considered an increase in HorzRO).
                    </p>

                    
                    <div class="docArticle_imageGallery">
                    
                        <div class="docArticle_imageCont">
                            <img src="images/stage1_chart.png" alt="">
                        </div>
                    
                        <div style="background-color: rgb(0, 0, 91);" class="docArticle_imageCont">
                            <img src="images/stage1_drawing.png" alt="">
                        </div>
                    
                    </div>
                                    

                </article>

                <article class="docArticle">
                    <h2>Stage 2</h2>
                
                    <p>
                        Our next step is operate on Cam J^. Things get a little tricky here. If you can visualize the CamHats rotating in all
                        sorts of configurations of HorzRO and VertRO, you can see how the X-Displacement and Z-Displacement of Cam J^ would be
                        different based on how much you initially rotated the CamHats system in your HorzRO stage. For instance. If you applied
                        a 0 HorzRO, and then got to this stage where you simply pitched the CamHats up and down (Vert rotation)........Cam J^
                        would actually have no displacement on the X-axis. It would only displace on the Y-axis and Z-axis. But if you applied a
                        certain Horz rotation and then pitched up/down....you'd notice that there would be a displacement on the X and Z axis
                        based on how much your Horz rotation was. If you tracked the tip of J^ moving in a CamHats pitch up/down
                        rotation...you'd notice that it follows an angled path. And this path depends on how much you initially rotated Horz.
                    </p>

                    <p>

                        If you look at the diagram below, you'll notice I've highlighted this path's shadow(projection) on the XZ Plane as a red
                        line. Notice that this red line has a X-axis displacement and Z-axis displacement (it's component vectors). This red
                        line represents how much distance Cam J ^ has covered on the XZ plane when it starts to move away from the origin [0, 0,
                        0] during a pitch up/down movement. It's easy to see that the length of this red line would depend only on the VertRO.
                        It's bearing however (which direction it moves in) would be influenced by the HorzRO. Notice how Cam J^ is sitting at
                        the end of this red line. If we can find this red line, we can get the X-axis and Z-axis displacements of Cam J^. But
                        how do we get this red line's length? We don't have a clear angle.
                    </p>

                    <p>
                        I guess since there is 90 degree angle between Cam J^(in its identity location), we could subtract VertRO from 90. Or a
                        better approach would be to simply shift that red line UP! Just shift it up so that it becomes directly opposite VertRO.
                        Then we can get the length of the red line with Sin(VertRO). Now you might notice the yellow line I've drawn. This is
                        the Y-axis displacement of Cam J^. Turns out that this does not depend on the HorzRO. This ONLY depends on the VertRO.
                        No matter what HorzRO angle the CamHats system is placed in, this projection of Cam J^ on the Y-axis does not change and
                        it only gets affected by the VertRO. So we can first orient the Y-axis component vector Cam J^ with the VertRO. Once we
                        get the length of the red line, we can use it in conjunction with the HorzRO to get the X-axis and Z-axis displacements
                        of Cam J^. Notice how if HorzRO was 0, the red line would not follow any angled path. It would just move parallel to the
                        Z-axis and follow that. And if HorzRO was Pi/2 radians (90 degrees), it would be parallel with the X-axis. Therefore we
                        can consider HorzRO to use in conjunction with the red line. Sin(HorzRO) = XDisp(X-axis displacement) / Red line. So the
                        X-axis displacement is: Sin(HorzRO) x Red Line. Likewise, the Z-axis displacement is Cos(HorzRO) x Red Line.
                    </p>
                
                
                    <div class="docArticle_imageGallery">
                
                        <div class="docArticle_imageCont">
                            <img src="images/stage2_chart.png" alt="">
                        </div>
                
                        <div style="background-color: rgb(0, 0, 91);" class="docArticle_imageCont">
                            <img src="images/stage2_drawing.png" alt="">
                        </div>

                        <div style="background-color: rgb(0, 0, 91);" class="docArticle_imageCont">
                            <img src="images/stage2.5_chart.png" alt="">
                        </div>
                
                    </div>
                
                
                </article>



                <article class="docArticle">
                    <h2>Stage 3</h2>
                
                    <p>
                        Now we have to update K^. In our rotation system, the final position of K^ depends on both HRO and VRO. This is where
                        our displacement subdivision technique comes in. In order to find the final position of K^ after a horizontal AND
                        vertical rotation is applied, we first have to ask ourselves what happens when you perform a horizontal rotation. K^ is
                        rotated and it gets displaced on the Z and X axis. It has Z and X component vectors. Now to track K's final position
                        after the vertical rotation is applied, we must go within these existing displacements and apply the vertical rotation
                        to them.
                    </p>
   
                
                    <div class="docArticle_imageGallery">
                
                        <div class="docArticle_imageCont">
                            <img src="images/stage3_chart.png" alt="">
                        </div>
                
                        <div style="background-color: rgb(0, 0, 91);" class="docArticle_imageCont">
                            <img src="images/stage3_drawing.png" alt="">
                        </div>
                
                    
                
                    </div>

                    <div class="docArticle_imageGallery">
                    
                        <div class="docArticle_imageCont">
                            <img src="images/KHat Subdivision Part 10.png" alt="">
                        </div>
                    
                        <div style="background-color: rgb(0, 0, 91);" class="docArticle_imageCont">
                            <img src="images/KHat Subdivision Part 11.png" alt="">
                        </div>
                    
                    
                    </div>

                    <p>
                        We have to perform our regular SOH CAH TOA operations to get these displacements. But instead of using the unit vector
                        length (1), we are using the existing length of these displacements.
                    </p>

                    <p>
                        The reason why this works is because when you apply a HRO rotation.....you will get a unique set of X and Z
                        displacements. You can actually determine the HRO amount just by examining these displacements.
                    </p>

                    <p>
                        This is why this technique works. For a particular HRO rotation, you will get a unique displacement on each axis. And
                        when you run that displacement through the VRO rotation, you will get the final position where K^ lands on that
                        particular axis.
                    </p>

                    <p>
                        The final position is a combination of the initial HRO and subsequent VRO rotation.
                    </p>

                    <div class="docArticle_imageGallery">
                    
                        <div class="docArticle_imageCont">
                            <img src="images/stage3.5_chart.png" alt="">
                        </div>
                    
                        <div class="docArticle_imageCont">
                            <img src="images/stage3.7_chart.png" alt="">
                        </div>

                        <div class="docArticle_imageCont">
                            <img src="images/stage3.8_chart.png" alt="">
                        </div>
                    
                    
                    </div>


                
                
                </article>

                


            </div>

        </section>










    </div>








    <div class="footerContainer">


    </div>




    <script src="" async defer></script>
</body>

</html>